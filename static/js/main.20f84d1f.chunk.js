(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,n){e.exports=n(34)},21:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),r=n(15),i=n.n(r),s=(n(21),n(10)),u=n(4),c=n(5),p=n(7),l=n(6),d=n(8),h=n(2),m=n.n(h),f=(n(27),n(29),n(9)),g=n.n(f);n(32);g.a.accessToken="pk.eyJ1IjoiZ3BibWlrZSIsImEiOiJjajQwNGZybzgwMDM1MndwbHpqcHRmbnQyIn0.YORNVupiyDJPBa8Bed0jzg";var v=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(p.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(o)))).handleViewportChange=function(){n.props.onViewportChange(n.map.getCenter().toArray())},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.map=new g.a.Map({container:this.node,style:"mapbox://styles/mapbox/streets-v9"}),this.map.on("move",this.handleViewportChange),this.map.on("zoom",this.handleViewportChange),this.map.on("load",function(){e.map.addSource("users",{type:"geojson",data:e.props.users||{type:"FeatureCollection",features:[]}}),e.map.addLayer({id:"users",source:"users",type:"circle",paint:{"circle-radius":10,"circle-color":["get","color"]}})})}},{key:"componentDidUpdate",value:function(){this.map&&this.map.getSource("users")&&this.map.getSource("users").setData(this.props.users)}},{key:"componentWillUnmount",value:function(){this.map.remove()}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{style:{width:"100vw",height:"100vh"},ref:function(t){e.node=t}})}}]),t}(a.Component);var y=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(p.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(o)))).state={users:void 0,uid:void 0},n.handleViewportChange=function(e){var t=Object(s.a)(e,2),a=t[0],o=t[1];n.ref&&n.ref.set({longitude:a,latitude:o})},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;m.a.initializeApp({apiKey:"AIzaSyCIvQz1UxN_6f-wPggmuT3zbKxABMyqj5I",authDomain:"follow-me-map.firebaseapp.com",databaseURL:"https://follow-me-map.firebaseio.com",projectId:"follow-me-map",storageBucket:"follow-me-map.appspot.com",messagingSenderId:"561126193715"}),m.a.auth().onAuthStateChanged(function(t){t&&(e.setState({uid:t.uid}),e.ref=m.a.database().ref("users/".concat(t.uid)),e.ref.onDisconnect().set(null),e.ref.set({longitude:0,latitude:0}))}),m.a.auth().signInAnonymously(),m.a.database().ref("users").on("value",function(t){var n=t.val()||{},a={type:"FeatureCollection",features:Object.entries(n).map(function(e){var t=Object(s.a)(e,2),n=t[0],a=t[1];return{type:"Feature",geometry:{type:"Point",coordinates:[a.longitude,a.latitude]},properties:{uid:n,color:"#"+function(e){var t=(16777215&e).toString(16).toUpperCase();return"00000".substring(0,6-t.length)+t}(function(e){for(var t=0,n=0;n<e.length;n++)t=e.charCodeAt(n)+((t<<5)-t);return t}(n))}}})};e.setState({users:a})})}},{key:"render",value:function(){return o.a.createElement(v,{onViewportChange:this.handleViewportChange,uid:this.state.uid,users:this.state.users})}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[16,2,1]]]);
//# sourceMappingURL=main.20f84d1f.chunk.js.map